<!DOCTYPE html>
<htmllang="en">
<head>
<title># LightRange</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="https://cdn.rawgit.com/necolas/normalize.css/master/normalize.css" />
<link href='https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,700,100,100italic' rel='stylesheet' type='text/css'>
<style>
html { box-sizing: border-box; font-size:62.5%; }
*, *:before, *:after { box-sizing: inherit; }
* { font-family: 'Roboto', arial, helvetica, sans-serif; font-weight:400; }
body { padding:40px 0; background: #fafafa; font-size:1.6rem; color:#333; }
#c { width:500px; padding:40px; margin:0 auto; min-height:1000px; background:#fff; border:1px solid #eee; border-top-width:2px; }
h1 { margin:0; font-size: 4.2rem; font-weight:300; line-height:100%; }
h1 b { font-weight: 500; }
p { line-height:150%; }
p.sub { margin:5px 0 40px; color:#aaa; font-weight:300; text-transform: uppercase; }
</style>
<style>
input { padding:5px 10px; }
#t { border-collapse: collapse; margin-top:40px; cursor: default; }
#t td { border:1px solid #ddd; padding:5px; text-align:center; vertical-align:middle; }
#t td:hover i { background: #eee; }
#t td i { font-style:normal; }
#t td i {
	display:block;
	position:relative;
	width:34px;
	height:34px;
	line-height:34px;
	border-radius:50%;
	transition: all .2s ease;
}

#t thead td { background: #eee; }

.sel1,.sel2, .range { color:#fff; }
#t td.range i { background: #9cf; }
#t td.sel1 i { background: #4cf; }
#t td.sel2 i { background: hotpink; }

.sel1 i, .sel2 i { animation: bounce .2s ease-in-out 1; }

@keyframes bounce {
	0% { transform: translateY(0); }
	20% { transform: translateY(-5px); }
	50% { transform: translateY(5px); }
	100% { transform: translateY(0px); }
}

</style>
</head>
<body>
<div id="c">

<h1><b>LightRange</h1>
<p class="sub">Select A then B, then maybe A again</p>

<!--<input type="text" class="date">-->

<div id="cal">
<table id="t">
	<thead>
	<tr>
		<td>M</td>
		<td>T</td>
		<td>W</td>
		<td>T</td>
		<td>F</td>
		<td>S</td>
		<td>S</td>
	</tr>
	</thead>
	<tbody>
	<tr>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
	</tr>
	<tr>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
	</tr>
	<tr>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
	</tr>
	<tr>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
	</tr>
	<tr>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
		<td><i>9</i></td>
	</tr>
	</tbody>
</table>
</div>

<div id="action"></div>

</div><!-- /#c -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
// INIT
;(function($, window, document, undefined) {

	'use strict';

	// helpers
	function _id(e) { return document.getElementById(e); }
	function _e(e) { return document.querySelector(e); }
	function _ee(e) { return document.querySelectorAll(e); }
	function _for(e,f) { var i, len=e.length; for(i=0;i<len;i++){ f(e[i]); }}
	function log(e, before) { before=before||''; console.log(before+e); }
	
	function userSelect(e,main){
		
		var sel1 = _id('sel1'),
			sel2 = _id('sel2');		
			
		// first exist
		if( sel1 === null ){
			e.id = 'sel1';
			e.classList.add('sel1');
			//log('select second option');
		}
		
		// second exist
		else if( sel2 === null && e.id !== 'sel1' ){ // prevent making #2 to #1
			e.id = 'sel2';
			e.classList.add('sel2');
				
			// selection is complete
			var par = e.parentNode,			// tr
				parPar = main;				// tbody (main)
				
				var td = main.querySelectorAll('td'),
					go = false,
					stop = false,
					i=0,
					s1i=0,
					s2i=999;
			
			_for(td, function(e){
				i++;
				
				if( e.id == 'sel1' ) { go=1; s1i = i; }
				if( e.id == 'sel2' ) { stop=1; s2i = i; }
				
				if( s1i < s2i && go ){
					if(go){ e.classList.add('range'); }
				} 
				if(stop){ go=0; }
				
			})			
			
			
		}
		
		// both selections exist
		else {
			var td = 
			_for()
			sel1.removeAttribute('class');
			sel1.removeAttribute('id');
			if(sel2 !== null){
				sel2.removeAttribute('class');
				sel2.removeAttribute('id');
			}
			
			//userSelect(e);
		}
		
	}

	
	var tb = _e('tbody');
	$(tb).on('click', 'td', function(){ userSelect(this,tb); });
	
	
	
	
	
	
	
	
	
	/*-----------------------------------------------------
		
		GET MONTH DATA
		
	-----------------------------------------------------*/
	
	var monthInformation = function(year, month){
        /* Create a date. Usually month in JS is 0-11 index based but here is a hack that can be used to calculate total days in a month */
        var date = new Date(year, month, 0);
        /* Get the total number of days in a month */
        this.totalDays = date.getDate();
        /* End day of month. Like Saturday is end of month etc. 0 means Sunday and 6 means Saturday */
        this.endDay = date.getDay();
        date.setDate(1);
        /* Start day of month. Like Saturday is start of month etc. 0 means Sunday and 6 means Saturday */
        this.startDay = date.getDay();
        /* Here we generate days for 42 cells of a Month */
        var days = new Array(42);
        /* Here we calculate previous month dates for placeholders if starting day is not Sunday */
        var prevMonthDays = 0;
        var prevMonth = new Date(year, month, 0);
        prevMonth.setMonth(prevMonth.getMonth() - 1);
        if(this.startDay !== 0) prevMonthDays  = prevMonth.getDate() - this.startDay;
        /* This is placeholder for next month. If month does not end on Saturday, placeholders for next days to fill other cells */
        var count = 0;
        // 42 = 7 columns * 6 rows. This is the standard number. Verify it with any standard Calendar
        for(var i = 0; i < 42; i += 1) {
            var day = {};
            /* So start day is not Sunday, so we can display previous month dates. For that below we identify previous month dates */
            if(i < this.startDay) {
                day.date = (prevMonthDays = prevMonthDays + 1);
            /* belong to next month dates. So, month does not end on Saturday. So here we get next month dates as placeholders */
            } else if(i > this.totalDays + (this.startDay - 1)) { 
                day.date = (count = count + 1);
            /* belong to current month dates. */    
            } else {
                day.date = (i - this.startDay) + 1;
            }
            days[i] = day.date;
        }
        this.days = days;
    };
	
	var q = monthInformation.call(2015, 1);
	console.log( q );



})(jQuery, window, document); // end() init
</script>
</body>
</html>